import{w as l}from"./paths.CQM_VkiC.js";import{a as r,A as o}from"./api.B1Xfa_7A.js";import{t as d}from"./toString.8a2CNWuX.js";import{c as w}from"./_createCompounder.D8xFyIMP.js";var f=0;function u(a){var t=++f;return d(a)+t}var b=w(function(a,t,e){return a+(e?" ":"")+t.toUpperCase()});const m=l({}),c=l({}),g=async()=>{const a={throwHttpErrors:!0},t=await r.get(`${o}/auth/authorities`,a).json(),e={};!t.authlyUserLoginDisabled&&!t.authlyAuthorityDisabled&&(e.Authly={id:u(),enabled:!0,authorityName:"Authly",sourceName:"",value:"Authly",text:"Authly",args:[{name:"username",required:!0},{name:"password",required:!0}]}),Object.entries(t.authoritySources).map(([i,y])=>{Object.entries(y).map(([n,s])=>{const h=`${i}:::${n}`;s=s.slice(2),e[h]={id:u(),enabled:!0,authorityName:i,sourceName:n,value:h,text:`${b(i)}: ${n}`,args:[...s.slice(-(s.length-1)),s[0]]}})}),m.set(e)},$=async a=>{const t={json:a,throwHttpErrors:!0};await r.post(`${o}/auth/authenticate`,t).then(p)},p=async()=>{const a=await r.get(`${o}/auth/session`);if(a.ok){const t=await a.json();c.set(t.Profile)}},j=async()=>{(await r.get(`${o}/auth/session`)).ok&&c.set({})};export{m as a,$ as b,p as c,g,j as l,c as p,u};
